<h1><%= t('.passing', title: @test_passage.test.title) %></h1>

<p>
  <% if @test_passage.test.timer != 0 %>
    <%= t('.time_left') %>:
    <b id='timer'><% %></b>

    <%= content_tag :span, '',
                id: :time,
                data: { timer: @test_passage.test.timer.to_s,
                deadline: (@test_passage.created_at + @test_passage.test.timer.to_i * 60).to_i } %>
  <% end %>
<p>

<div id="myProgress">
  <%= content_tag :div, "",
      class: 'progress-bar',
      id: "myBar",
      data: { question_num: @test_passage.question_number,
              questions_qty: @test_passage.questions_qty }  %>
</div>

<small class="font-italic"><%= t('.question') %> <%= @test_passage.question_number %> <%= t('.of') %>
<%= @test_passage.questions_qty %></small><br>

<div class="mt-10">
  <p>
    <b><%= @test_passage.current_question.body %></b>
  </p>

  <%= form_with url: test_passage_path(@test_passage), local: true, method: :put, id: 'test_passage_form' do |form| %>
    <%= form.collection_check_boxes :reply_ids, @test_passage.current_question.replies, :id, :body, include_hidden: false do |b| %>
    <p>
      <%= b.check_box id: "reply_ids_#{b.object.id}" %>
      <%= b.label %>
    </p>
    <% end %>

    <p><%= link_to 'Gist Question', gist_test_passage_path(@test_passage), method: :post %></p>
    <p><%= form.submit t('.next') %></p>
  <% end %>
  </div>
